import './index.less';
import Xtemplate from 'xtemplate/lib/runtime.js';
import util from 'common/js/util.js';
import cateTpl from './tmpl/cate.xtpl';
import jingguan01 from 'image/jingguan01.jpg';
import jingguan02 from 'image/jingguan02.jpg';
import jingguan03 from 'image/jingguan03.jpg';
import jingguan04 from 'image/jingguan04.jpg';
import jingguan05 from 'image/jingguan05.jpg';
import jingguan06 from 'image/jingguan06.jpg';
import jingguan07 from 'image/jingguan07.jpg';
import jingguan08 from 'image/jingguan08.jpg';
import jingguan09 from 'image/jingguan09.jpg';
import jingguan10 from 'image/jingguan10.jpg';
import jingguan11 from 'image/jingguan11.jpg';
import jingguan12 from 'image/jingguan12.jpg';
import jingguan13 from 'image/jingguan13.jpg';
import jingguan14 from 'image/jingguan14.jpg';
import jingguan15 from 'image/jingguan15.jpg';
import jingguan16 from 'image/jingguan16.jpg';
import jingguan17 from 'image/jingguan17.jpg';
import jingguan18 from 'image/jingguan18.jpg';
import jingguan19 from 'image/jingguan19.jpg';

import shangyejie01 from 'image/shangyejie01.jpg';
import shangyejie02 from 'image/shangyejie02.jpg';
import shangyejie03 from 'image/shangyejie03.jpg';
import shangyejie04 from 'image/shangyejie04.jpg';
import shangyejie05 from 'image/shangyejie05.jpg';
import shangyejie06 from 'image/shangyejie06.jpg';
import shangyejie07 from 'image/shangyejie07.jpg';
import shangyejie08 from 'image/shangyejie08.jpg';
import shangyejie09 from 'image/shangyejie09.jpg';
import shangyejie10 from 'image/shangyejie10.jpg';
import shangyejie11 from 'image/shangyejie11.jpg';
import shangyejie12 from 'image/shangyejie12.jpg';
import shangyejie13 from 'image/shangyejie13.jpg';
import shangyejie14 from 'image/shangyejie14.jpg';
import shangyejie15 from 'image/shangyejie15.jpg';
import shangyejie16 from 'image/shangyejie16.jpg';
import shangyejie17 from 'image/shangyejie17.jpg';
import shangyejie18 from 'image/shangyejie18.jpg';
import shangyejie19 from 'image/shangyejie19.jpg';
import shangyejie20 from 'image/shangyejie20.jpg';

import tingchepeng01 from 'image/tingchepeng01.jpg';
import tingchepeng02 from 'image/tingchepeng02.jpg';
import tingchepeng03 from 'image/tingchepeng03.jpg';
import tingchepeng04 from 'image/tingchepeng04.jpg';
import tingchepeng05 from 'image/tingchepeng05.jpg';
import tingchepeng06 from 'image/tingchepeng06.jpg';
import tingchepeng07 from 'image/tingchepeng07.jpg';
import tingchepeng08 from 'image/tingchepeng08.jpg';
import tingchepeng09 from 'image/tingchepeng09.jpg';
import tingchepeng10 from 'image/tingchepeng10.jpg';
import tingchepeng11 from 'image/tingchepeng11.jpg';
import tingchepeng12 from 'image/tingchepeng12.jpg';
import tingchepeng13 from 'image/tingchepeng13.jpg';
import tingchepeng14 from 'image/tingchepeng14.jpg';
import tingchepeng15 from 'image/tingchepeng15.jpg';
import tingchepeng16 from 'image/tingchepeng16.jpg';
import tingchepeng17 from 'image/tingchepeng17.jpg';
import tingchepeng18 from 'image/tingchepeng18.jpg';
import tingchepeng19 from 'image/tingchepeng19.jpg';
import tingchepeng20 from 'image/tingchepeng20.jpg';
import tingchepeng21 from 'image/tingchepeng21.jpg';

import tixulei01 from 'image/tixulei01.jpg';
import tixulei02 from 'image/tixulei02.jpg';
import tixulei03 from 'image/tixulei03.jpg';
import tixulei04 from 'image/tixulei04.jpg';
import tixulei05 from 'image/tixulei05.jpg';
import tixulei06 from 'image/tixulei06.jpg';
import tixulei07 from 'image/tixulei07.jpg';
import tixulei08 from 'image/tixulei08.jpg';
import tixulei09 from 'image/tixulei09.jpg';
import tixulei10 from 'image/tixulei10.jpg';
import tixulei11 from 'image/tixulei11.jpg';
import tixulei12 from 'image/tixulei12.jpg';
import tixulei13 from 'image/tixulei13.jpg';
import tixulei14 from 'image/tixulei14.jpg';
import tixulei15 from 'image/tixulei15.jpg';
import tixulei16 from 'image/tixulei16.jpg';
import tixulei17 from 'image/tixulei17.jpg';
import tixulei18 from 'image/tixulei18.jpg';
import tixulei19 from 'image/tixulei19.jpg';

import shoufeizhan01 from 'image/shoufeizhan01.jpg';
import shoufeizhan02 from 'image/shoufeizhan02.jpg';
import shoufeizhan03 from 'image/shoufeizhan03.jpg';
import shoufeizhan04 from 'image/shoufeizhan04.jpg';
import shoufeizhan05 from 'image/shoufeizhan05.jpg';
import shoufeizhan06 from 'image/shoufeizhan06.jpg';
import shoufeizhan07 from 'image/shoufeizhan07.jpg';
import shoufeizhan08 from 'image/shoufeizhan08.jpg';
import shoufeizhan09 from 'image/shoufeizhan09.jpg';
import shoufeizhan10 from 'image/shoufeizhan10.jpg';
import shoufeizhan11 from 'image/shoufeizhan11.jpg';
import shoufeizhan12 from 'image/shoufeizhan12.jpg';
import shoufeizhan13 from 'image/shoufeizhan13.jpg';
import shoufeizhan14 from 'image/shoufeizhan14.jpg';
import shoufeizhan15 from 'image/shoufeizhan15.jpg';
import shoufeizhan16 from 'image/shoufeizhan16.jpg';
import shoufeizhan17 from 'image/shoufeizhan17.jpg';
import shoufeizhan18 from 'image/shoufeizhan18.jpg';

import wushuichuli01 from 'image/wushuichuli01.jpg';
import wushuichuli02 from 'image/wushuichuli02.jpg';
import wushuichuli03 from 'image/wushuichuli03.jpg';
import wushuichuli04 from 'image/wushuichuli04.jpg';
import wushuichuli05 from 'image/wushuichuli05.jpg';
import wushuichuli06 from 'image/wushuichuli06.jpg';
import wushuichuli07 from 'image/wushuichuli07.jpg';
import wushuichuli08 from 'image/wushuichuli08.jpg';
import wushuichuli09 from 'image/wushuichuli09.jpg';
import wushuichuli10 from 'image/wushuichuli10.jpg';


$('#js-nav-box [data-type="case"]').addClass('active');
var caseArr = [{
    type: 'jingguan',
    img: jingguan16,
    title: '景观类',
    content: '景观设施工程涵盖了公共区域广场、游乐场、商业广场、公园等，造型自由、轻巧、柔美、充满力量感。',
    childen: [jingguan01, jingguan02, jingguan03, jingguan04, jingguan05, jingguan06, jingguan07, jingguan08, jingguan09, jingguan10, jingguan11, jingguan12, jingguan13, jingguan14, jingguan15, jingguan16, jingguan17, jingguan18, jingguan19]
}, {
    type: 'shangyejie',
    img: shangyejie02,
    title: '商业街及屋顶类',
    content: '商业街及屋顶设施工程涵盖了公共区域广场及屋顶加盖、游乐场、商业广场、公园等，造型自由、轻巧、柔美、充满力量感。',
    childen: [shangyejie01,shangyejie02,shangyejie03,shangyejie04,shangyejie05,shangyejie06,shangyejie07,shangyejie08,shangyejie09,shangyejie10,shangyejie11,shangyejie12,shangyejie13,shangyejie14,shangyejie15,shangyejie16,shangyejie17,shangyejie18,shangyejie19,shangyejie20]
}, {
    type: 'tingchepeng',
    img: tingchepeng06,
    title: '停车棚类',
    content: '停车棚及充电桩设施工程涵盖了公共区域停车场、高速公路停车场、游乐场、商业广场、公园等，造型自由、轻巧、柔美、充满力量感。',
    childen: [tingchepeng01,tingchepeng02,tingchepeng03,tingchepeng04,tingchepeng05,tingchepeng06,tingchepeng07,tingchepeng08,tingchepeng09,tingchepeng10,tingchepeng11,tingchepeng12,tingchepeng13,tingchepeng14,tingchepeng15,tingchepeng16,tingchepeng17,tingchepeng18,tingchepeng19,tingchepeng20,tingchepeng21]
}, {
    type: 'tixulei',
    img: tixulei11,
    title: '体育设施类',
    content: '体育设施工程涵盖了公共区域体育看台、足球场、篮球场、网球场等，造型自由、轻巧、柔美、充满力量感。',
    childen: [tixulei01,tixulei02,tixulei03,tixulei04,tixulei05,tixulei06,tixulei07,tixulei08,tixulei09,tixulei10,tixulei11,tixulei12,tixulei13,tixulei14,tixulei15,tixulei16,tixulei17,tixulei18,tixulei19]
},{
    type: 'shoufeizhan',
    img: shoufeizhan12,
    title: '收费站类',
    content: '收费站设施工程涵盖了高速公路收费站、加油加气站等，造型自由、轻巧、柔美、充满力量感。等，造型自由、轻巧、柔美、充满力量感。',
    childen: [shoufeizhan01,shoufeizhan02,shoufeizhan03,shoufeizhan04,shoufeizhan05,shoufeizhan06,shoufeizhan07,shoufeizhan08,shoufeizhan09,shoufeizhan10,shoufeizhan11,shoufeizhan12,shoufeizhan13,shoufeizhan14,shoufeizhan15,shoufeizhan16,shoufeizhan17,shoufeizhan18]
},{
    type: 'wushuichuli',
    img: wushuichuli05,
    title: '污水处理类',
    content: '污水处理环保设施工程涵盖了污水处理池、环保工程加盖项目等，造型自由、轻巧、柔美、充满力量感。等，造型自由、轻巧、柔美、充满力量感。',
    childen: [wushuichuli01,wushuichuli02,wushuichuli03,wushuichuli04,wushuichuli05,wushuichuli06,wushuichuli07,wushuichuli08,wushuichuli09,wushuichuli10]
}];

var type = util.getUrlQueryString('type');
var detialItem = caseArr.filter(function(item) {
    return item.type === type;
});
var _html = new Xtemplate(cateTpl).render(detialItem[0]);
$("#js-detail-wrap").empty().html(_html);

function getStyle(obj, name) {
    if (obj.currentStyle) {
        return obj.currentStyle[name];
    } else {
        return getComputedStyle(obj, false)[name];
    }
}
//var alpha = 30;
function startMove(obj, arr, iTarget) {
    clearInterval(obj.timer);

    obj.timer = setInterval(function() {
        var cur = 0;
        if (arr == 'opacity') {
            cur = Math.round(parseFloat(getStyle(obj, arr)) * 100);
        } else {
            cur = parseInt(getStyle(obj, arr));
        }
        var speed = (iTarget - cur) / 6;
        speed = speed > 0 ? Math.ceil(speed) : Math.floor(speed);
        if (cur == iTarget) {
            clearInterval(obj.timer);
        } else {
            if (arr == 'opacity') {
                obj.style.filter = 'alpha(opcity:' + (cur + speed) + ')';
                obj.style.opacity = (cur + speed) / 100;

                //  document.getElementById('tex1').value = obj.style.opacity;
            } else {
                obj.style[arr] = cur + speed + 'px';
            }
        }
    }, 30);
}

function getByClass(oParent, sClass) {
    var aEle = oParent.getElementsByTagName('*');
    var aResult = [];

    for (var i = 0; i < aEle.length; i++) {
        if (aEle[i].className == sClass) {
            aResult.push(aEle[i]);
        }
    }
    return aResult;
}


window.onload = function() {
    var oDiv = document.getElementById('playimages');
    var oBtnPrev = getByClass(oDiv, 'prev')[0];
    var oBtnNext = getByClass(oDiv, 'next')[0];
    var oMarkLeft = getByClass(oDiv, 'mark_left')[0];
    var oMarkRight = getByClass(oDiv, 'mark_right')[0];
    //var oDivSmall=document.getElementById('small_pic');
    var oDivSmall = getByClass(oDiv, 'small_pic')[0];
    var oUlSmall = oDivSmall.getElementsByTagName('ul')[0];
    var aLiSmall = oDivSmall.getElementsByTagName('li');


    var oUlBig = getByClass(oDiv, 'big_pic')[0];
    var aLiBig = oUlBig.getElementsByTagName('li');


    var nowZIndex = 2;
    var now = 0;
    oUlSmall.style.width = aLiSmall.length * aLiSmall[0].offsetWidth + 'px';

    //左右按钮
    oBtnPrev.onmouseover = oMarkLeft.onmouseover = function() {
        startMove(oBtnPrev, 'opacity', 100);

    };
    oBtnPrev.onmouseout = oMarkLeft.onmouseout = function() {
        startMove(oBtnPrev, 'opacity', 0);
    };
    oBtnNext.onmouseover = oMarkRight.onmouseover = function() {
        startMove(oBtnNext, 'opacity', 100);
    };
    oBtnNext.onmouseout = oMarkRight.onmouseout = function() {
        startMove(oBtnNext, 'opacity', 0);
    };
    //大图切换
    for (var i = 0; i < aLiSmall.length; i++) {
        aLiSmall[i].index = i;
        aLiSmall[i].onclick = function() {
            //alert('222');
            if (this.index == now) return;
            now = this.index;
            tab();


        }
        aLiSmall[i].onmouseover = function() {
            startMove(this, 'opacity', 100);
        };
        aLiSmall[i].onmouseout = function() {
            if (this.index != now) {
                startMove(this, 'opacity', 30);
            }
        };
    }

    function tab() {
        aLiBig[now].style.zIndex = nowZIndex++;

        for (var i = 0; i < aLiSmall.length; i++) {
            startMove(aLiSmall[i], 'opacity', 30);
        }

        aLiBig[now].style.height = 0;
        startMove(aLiBig[now], 'height', 320);
        startMove(aLiSmall[now], 'opacity', 100);
        if (now == 0) {
            startMove(oUlSmall, 'left', 0);
        } else if (now == aLiSmall.length - 1) {
            startMove(oUlSmall, 'left', -(now - 2) * aLiSmall[0].offsetWidth);
        } else {
            startMove(oUlSmall, 'left', -(now - 1) * aLiSmall[0].offsetWidth);
        }
    }
    oBtnPrev.onclick = function() {
        now--;
        if (now == -1) {
            now = aLiSmall.length - 1;
        }
        tab();
    }
    oBtnNext.onclick = function() {
        now++;
        if (now == aLiSmall.length) {
            now = 0;
        }
        tab();
    };
    var timer = setInterval(oBtnNext.onclick, 2000);
    oDiv.onmouseover = function() {
        clearInterval(timer);
    };
    oDiv.onmouseout = function() {
        timer = setInterval(oBtnNext.onclick, 2000);
    };
};
// JavaScript Document
